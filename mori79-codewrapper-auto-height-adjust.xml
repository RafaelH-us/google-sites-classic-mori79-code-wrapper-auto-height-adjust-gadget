<Module> <ModulePrefs title="Code Wrapper Auto Height Adjust" description="A gadget to insert your embed code a gadget to embed HTML and JavaScript" height="100" author="Mori" author_email="mori79+gadgets@gmail.com"> <Require feature="dynamic-height"/> <Require feature="setprefs" /> </ModulePrefs> <UserPref name="code" display_name="Embed code" required="true"/> <Content type="html" view="home"> <![CDATA[ <style type="text/css"> body {background:transparent;} </style> <div id="contents"></div> <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script> <script> function Initialize() { var prefs = new _IG_Prefs(); $("#contents").html(prefs.getString('code')); var interval = setInterval(function(){ gadgets.window.adjustHeight($('#contents').height()); }, 1000); setTimeout(function() {clearInterval(interval);}, 10000); } gadgets.util.registerOnLoadHandler(Initialize); </script> ]]> </Content> <Content type="html" view="configuration" preferred_height="250"> <![CDATA[ <style type="text/css"> p { font-weight: bold; } textarea { width: 100%; height: 200px; font-family: monospace; color: #006000; background-color: #efefef; border: 0 solid #d3d3d3; padding: -1px; } </style> <p>Embed Code:</p> <textarea id="code" rows="1" cols="1">__UP_code__</textarea> <script type="text/javascript"> function init() { var prefs = new gadgets.Prefs(); var pref = document.getElementById('code'); var handler = function () { prefs.set('code', document.getElementById('code').value); }; pref.onchange = handler; pref.onkeyup = handler; } gadgets.util.registerOnLoadHandler(init); </script> ]]> </Content></Module>
